#!/usr/bin/make -f

CFLAGS += $(CPPFLAGS)
CXXFLAGS += $(CPPFLAGS)
LDFLAGS += -Wl,-z,defs

BUILDFLAGS = \
	QMAKE_CFLAGS="$(CFLAGS)" \
	QMAKE_CXXFLAGS="$(CXXFLAGS)" \
	QMAKE_LFLAGS="$(LDFLAGS)"

export QT_SELECT = qt5

%:
	dh ${@} --parallel

override_dh_auto_build:
	dh_auto_build -- QMAKE='qmake $(BUILDFLAGS)'

override_dh_auto_install:

override_dh_install:
	$(MAKE) install-inyokaedit DESTDIR=$(CURDIR)/debian/inyokaedit
	$(MAKE) install-plugins DESTDIR=$(CURDIR)/debian/inyokaedit-plugins
	$(MAKE) install-data-ubuntuusersde DESTDIR=$(CURDIR)/debian/inyokaedit-data-ubuntuusersde

override_dh_builddeb:
	dh_builddeb -- -Zxz -z9
